import{d as U,u as S,a as V,r as g,o as E,S as C,c as r,b as o,w as d,v as m,t as p,e as c,f as R,g as B,h as M,i as j,_ as q,j as A,k as D,l as L,m as h,n as l,p as N,R as O,q as P,A as T,s as F,B as I}from"./index-BfUXfGLe.js";const $={id:"signUpPage",class:"bg-yellow"},H={class:"conatiner signUpPage vhContainer"},z=o("div",{class:"side"},[o("a",{href:"javascript:void(0)"},[o("img",{class:"logoImg",src:q,alt:""})]),o("img",{class:"d-m-n",src:A,alt:"workImg"})],-1),G={class:"formControls",action:"index.html"},J=o("h2",{class:"formControls_txt"},"註冊帳號",-1),K=o("label",{class:"formControls_label",for:"email"},"Email",-1),Q={key:0},W=o("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),X={key:1},Y=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),Z={key:2},ss=o("label",{class:"formControls_label",for:"pwdConfirm"},"再次輸入密碼",-1),es={key:3},ts=U({__name:"SignUpView",setup(os){const v=S(),k=D(),u=V(),s=g(new L),a=g(new h);E(async()=>{await v.checkout(!0)||await C.fire({icon:"info",title:"登入狀態",text:"您已登入，將自動跳轉至 Todo 功能頁",showConfirmButton:!1,timer:1500})});const b=async()=>{if(!x())return;const t=y();u.show();const n=`${I}/users/sign_up`;let i,f;try{i=(await P.post(n,t)).data,u.hide()}catch(w){if(w instanceof T){const _=w.response;i=_==null?void 0:_.data,f=i!=null&&i.message?`註冊失敗，${i.message}。`:"註冊失敗，請稍後再試。"}else f="註冊失敗，請稍後再試。";u.hide(),await C.fire({icon:"error",title:"註冊失敗",text:f});return}i.status&&(await C.fire({icon:"success",title:"註冊成功",text:"歡迎加入，將跳轉至登入頁面",showConfirmButton:!1,timer:1500}),k.push("/sign-in"))},x=()=>{const e=F(!0);return Object.assign(a,new h),(s.email===""||s.password===""||s.passwordConfirm==="")&&(s.email===""&&(a.email="請輸入 Email"),s.password===""&&(a.password="請輸入密碼"),s.passwordConfirm===""&&(a.passwordConfirm="請再次輸入密碼")),(s.email.indexOf("@")===-1||s.email.indexOf(" ")!==-1)&&(a.email="請輸入正確 Email 格式，並注意不可有空白。",e.value=!1),s.password.length<6&&(a.password="密碼長度不可小於 6。",e.value=!1),s.password!==s.passwordConfirm&&(a.passwordConfirm="兩次密碼不相符。",e.value=!1),e.value,e.value},y=()=>{const e={email:"",password:"",nickname:""};return Object.assign(e,s),e.email=e.email.split(" ").join(""),delete e.passwordConfirm,e.nickname===""&&(e.nickname=e.email.split("@")[0]),e};return(e,t)=>(l(),r("div",$,[o("div",H,[z,o("div",null,[o("form",G,[J,K,d(o("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":t[0]||(t[0]=n=>s.email=n)},null,512),[[m,s.email]]),a.email!==null?(l(),r("span",Q,p(a.email),1)):c("",!0),W,d(o("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":t[1]||(t[1]=n=>s.nickname=n)},null,512),[[m,s.nickname]]),a.nickname!==null?(l(),r("span",X,p(a.nickname),1)):c("",!0),Y,d(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":t[2]||(t[2]=n=>s.password=n)},null,512),[[m,s.password]]),a.password!==null?(l(),r("span",Z,p(a.password),1)):c("",!0),ss,d(o("input",{class:"formControls_input",type:"password",name:"pwdConfirm",id:"pwdConfirm",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":t[3]||(t[3]=n=>s.passwordConfirm=n)},null,512),[[m,s.passwordConfirm]]),a.passwordConfirm!==null?(l(),r("span",es,p(a.passwordConfirm),1)):c("",!0),o("input",{class:"formControls_btnSubmit",type:"button",value:"註冊帳號",onClick:R(b,["prevent"])}),B(j(O),{class:"formControls_btnLink",to:"/sign-in"},{default:M(()=>[N("登入")]),_:1})])])])]))}});export{ts as default};
